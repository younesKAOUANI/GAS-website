export default function OpportunityCard({ item }) {

    const formatNumber = (num) => {
        if (typeof num !== "number" && typeof num !== "string") return num;
        return num
            .toString()
            .replace(/\B(?=(\d{3})+(?!\d))/g, " ");
    };

    return (
        <div className="rounded-2xl bg-[#EEF1FF] p-4 shadow-sm transition hover:shadow-md">
            {/* Image */}
            <div className="relative mb-4 overflow-hidden rounded-xl">
                <img src={item.image.formats.small.url} alt={item.title} className="h-150 w-full object-cover" />

                {/* Badges */}
                <div className="absolute left-3 top-3 space-y-2">
                    <span className="block rounded-full bg-primary px-3 py-1 text-xs text-white uppercase">
                        {item.detail}
                    </span>
                    <span className="block rounded-full bg-white px-3 py-1 text-xs text-primary">
                        {item.type}
                    </span>
                </div>
            </div>

            {/* Content */}
            <div className="flex justify-between">
                <h3 className="font-semibold text-gray-900 text-2xl font-cursive">{item.name}</h3>
                <span className="font-semibold text-primary">{formatNumber(item.price)} DA</span>
            </div>

            <p className="mt-1 text-sm text-gray-500 flex items-center gap-2">
                <svg width="18" height="20" viewBox="0 0 18 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14.8 2.53333C13.9556 1.73333 13.0111 1.11111 11.9667 0.666666C10.9222 0.222221 9.82222 -1.90735e-06 8.66667 -1.90735e-06C7.51111 -1.90735e-06 6.4 0.222221 5.33333 0.666666C4.26667 1.11111 3.33333 1.73333 2.53333 2.53333C1.73333 3.33333 1.11111 4.26667 0.666667 5.33333C0.222222 6.4 0 7.51111 0 8.66667C0 9.82222 0.222222 10.9222 0.666667 11.9667C1.11111 13.0111 1.73333 13.9556 2.53333 14.8L7.13333 19.4C7.53333 19.8 8.03333 20 8.63333 20C9.23333 20 9.75556 19.8 10.2 19.4L14.8 14.8C15.6 13.9556 16.2222 13.0111 16.6667 11.9667C17.1111 10.9222 17.3333 9.82222 17.3333 8.66667C17.3333 7.51111 17.1111 6.4 16.6667 5.33333C16.2222 4.26667 15.6 3.33333 14.8 2.53333ZM13.9333 13.9333L9.33333 18.5333C9.15556 18.7111 8.93333 18.8 8.66667 18.8C8.4 18.8 8.15556 18.7111 7.93333 18.5333L3.33333 13.9333C2.62222 13.2222 2.08889 12.4111 1.73333 11.5C1.37778 10.5889 1.2 9.63333 1.2 8.63333C1.2 7.63333 1.37778 6.67778 1.73333 5.76667C2.08889 4.85555 2.62222 4.05555 3.33333 3.36666C4.04444 2.67778 4.85556 2.14444 5.76667 1.76667C6.67778 1.38889 7.63333 1.2 8.63333 1.2C9.63333 1.2 10.5889 1.38889 11.5 1.76667C12.4111 2.14444 13.2222 2.66667 13.9333 3.33333C14.9111 4.31111 15.5667 5.44444 15.9 6.73333C16.2333 8.02222 16.2333 9.31111 15.9 10.6C15.5667 11.8889 14.9111 13 13.9333 13.9333ZM8.66667 5.53333C7.82222 5.53333 7.08889 5.84444 6.46667 6.46667C5.84444 7.08889 5.53333 7.82222 5.53333 8.66667C5.53333 9.51111 5.84444 10.2333 6.46667 10.8333C7.08889 11.4333 7.82222 11.7333 8.66667 11.7333C9.51111 11.7333 10.2333 11.4333 10.8333 10.8333C11.4333 10.2333 11.7333 9.51111 11.7333 8.66667C11.7333 7.82222 11.4333 7.08889 10.8333 6.46667C10.2333 5.84444 9.51111 5.53333 8.66667 5.53333ZM8.66667 10.6C8.13333 10.6 7.67778 10.4111 7.3 10.0333C6.92222 9.65555 6.73333 9.2 6.73333 8.66667C6.73333 8.13333 6.92222 7.67778 7.3 7.3C7.67778 6.92222 8.13333 6.73333 8.66667 6.73333C9.2 6.73333 9.65556 6.92222 10.0333 7.3C10.4111 7.67778 10.6 8.13333 10.6 8.66667C10.6 9.2 10.4111 9.65555 10.0333 10.0333C9.65556 10.4111 9.2 10.6 8.66667 10.6Z" fill="#1C1C1A" />
                </svg>
                {item.location}
            </p>

            <div className="mt-3 flex items-center justify-between text-sm text-gray-600">
                <p className="mt-1 text-sm text-gray-500 flex items-center gap-2">
                    <svg width="20" height="15" viewBox="0 0 20 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5.11283 14.591C4.66549 14.591 4.28449 14.4337 3.96983 14.119C3.65449 13.8043 3.49683 13.423 3.49683 12.975V5.53801L0.804827 7.54301C0.686827 7.61968 0.56516 7.65201 0.439827 7.64001C0.313827 7.62801 0.20616 7.56301 0.116827 7.44501C0.026827 7.32701 -0.0111731 7.20535 0.00282692 7.08001C0.0168269 6.95401 0.0828269 6.84601 0.200827 6.75601L8.82983 0.305014C8.97449 0.197014 9.12883 0.119347 9.29283 0.0720135C9.45683 0.0246802 9.62749 0.00068018 9.80483 1.35135e-05C9.98216 -0.000653153 10.1532 0.0233469 10.3178 0.0720135C10.4825 0.12068 10.6365 0.198013 10.7798 0.304013L14.1508 2.81401V1.53401C14.1508 1.27068 14.2422 1.04768 14.4248 0.865014C14.6075 0.682347 14.8302 0.591014 15.0928 0.591014C15.3555 0.591014 15.5785 0.682347 15.7618 0.865014C15.9452 1.04768 16.0365 1.27035 16.0358 1.53301V4.22901L19.4278 6.75701C19.5418 6.84635 19.6068 6.95401 19.6228 7.08001C19.6388 7.20601 19.6022 7.32768 19.5128 7.44501C19.4235 7.56235 19.3158 7.62735 19.1898 7.64001C19.0638 7.65268 18.9418 7.62035 18.8238 7.54301L16.1318 5.53701V12.976C16.1318 13.4227 15.9745 13.8037 15.6598 14.119C15.3452 14.4337 14.9642 14.591 14.5168 14.591H12.6508C12.2035 14.591 11.8225 14.4337 11.5078 14.119C11.1932 13.8043 11.0358 13.423 11.0358 12.975V9.97501C11.0358 9.79568 10.9782 9.64835 10.8628 9.53301C10.7475 9.41768 10.6002 9.36001 10.4208 9.36001H9.18983C9.00983 9.36001 8.86216 9.41768 8.74683 9.53301C8.63149 9.64835 8.57383 9.79568 8.57383 9.97501V12.975C8.57383 13.423 8.41649 13.8043 8.10183 14.119C7.78716 14.4337 7.40616 14.591 6.95883 14.591H5.11283ZM5.11283 13.591H6.95883C7.13816 13.591 7.28549 13.5333 7.40083 13.418C7.51616 13.3027 7.57383 13.1553 7.57383 12.976V9.97601C7.57383 9.52868 7.73116 9.14735 8.04583 8.83201C8.36116 8.51735 8.74249 8.36001 9.18983 8.36001H10.4198C10.8678 8.36001 11.2492 8.51735 11.5638 8.83201C11.8785 9.14735 12.0358 9.52868 12.0358 9.97601V12.976C12.0358 13.1553 12.0935 13.3027 12.2088 13.418C12.3242 13.5333 12.4715 13.591 12.6508 13.591H14.5168C14.6962 13.591 14.8435 13.5333 14.9588 13.418C15.0742 13.3027 15.1318 13.1553 15.1318 12.976V4.80101L10.1698 1.11601C10.0685 1.03935 9.94683 1.00101 9.80483 1.00101C9.66283 1.00101 9.54116 1.03935 9.43983 1.11601L4.49683 4.80101V12.976C4.49683 13.1553 4.55483 13.3027 4.67083 13.418C4.78616 13.5333 4.93349 13.591 5.11283 13.591ZM7.99683 5.59701H11.6128C11.6128 5.12768 11.4322 4.74135 11.0708 4.43801C10.7088 4.13468 10.2868 3.98301 9.80483 3.98301C9.32283 3.98301 8.90116 4.13468 8.53983 4.43801C8.17849 4.74135 7.99749 5.12768 7.99683 5.59701ZM7.40083 13.418C7.51616 13.3027 7.57383 13.1553 7.57383 12.976V9.97601C7.57383 9.52868 7.73116 9.14735 8.04583 8.83201C8.36116 8.51735 8.74249 8.36001 9.18983 8.36001H10.4198C10.8678 8.36001 11.2492 8.51735 11.5638 8.83201C11.2492 8.51668 10.8682 8.35935 10.4208 8.36001H9.18983C8.74249 8.36001 8.36116 8.51735 8.04583 8.83201C7.73116 9.14735 7.57383 9.52868 7.57383 9.97601V12.976C7.57383 13.1553 7.51616 13.3027 7.40083 13.418Z" fill="black" />
                    </svg>
                    {item.type}
                </p>
                <p className="mt-1 text-sm text-gray-500 flex items-center gap-2">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15.8667 18.8H13.4667C13.3333 18.8 13.2 18.8667 13.0667 19C12.9333 19.1333 12.8667 19.2778 12.8667 19.4333C12.8667 19.5889 12.9333 19.7222 13.0667 19.8333C13.2 19.9444 13.3333 20 13.4667 20H15.8667C16.0444 20 16.1889 19.9444 16.3 19.8333C16.4111 19.7222 16.4667 19.5889 16.4667 19.4333C16.4667 19.2778 16.4111 19.1333 16.3 19C16.1889 18.8667 16.0444 18.8 15.8667 18.8ZM11.1333 18.8H8.8C8.62222 18.8 8.47778 18.8667 8.36667 19C8.25556 19.1333 8.2 19.2778 8.2 19.4333C8.2 19.5889 8.25556 19.7222 8.36667 19.8333C8.47778 19.9444 8.62222 20 8.8 20H11.1333C11.3111 20 11.4556 19.9444 11.5667 19.8333C11.6778 19.7222 11.7333 19.5889 11.7333 19.4333C11.7333 19.2778 11.6778 19.1333 11.5667 19C11.4556 18.8667 11.3111 18.8 11.1333 18.8ZM19.4 8.2C19.2667 8.2 19.1333 8.25556 19 8.36667C18.8667 8.47778 18.8 8.62222 18.8 8.8V11.1333C18.8 11.3111 18.8667 11.4556 19 11.5667C19.1333 11.6778 19.2778 11.7333 19.4333 11.7333C19.5889 11.7333 19.7222 11.6778 19.8333 11.5667C19.9444 11.4556 20 11.3111 20 11.1333V8.8C20 8.62222 19.9444 8.47778 19.8333 8.36667C19.7222 8.25556 19.5778 8.2 19.4 8.2ZM19.4 12.8667C19.2667 12.8667 19.1333 12.9333 19 13.0667C18.8667 13.2 18.8 13.3333 18.8 13.4667V15.8C18.8 15.9778 18.8667 16.1222 19 16.2333C19.1333 16.3444 19.2778 16.4 19.4333 16.4C19.5889 16.4 19.7222 16.3444 19.8333 16.2333C19.9444 16.1222 20 15.9778 20 15.8V13.4667C20 13.3333 19.9444 13.2 19.8333 13.0667C19.7222 12.9333 19.5778 12.8667 19.4 12.8667ZM6.46667 18.8H5.86667V18.2667C5.86667 18.0889 5.81111 17.9444 5.7 17.8333C5.58889 17.7222 5.44444 17.6667 5.26667 17.6667C5.08889 17.6667 4.94444 17.7222 4.83333 17.8333C4.72222 17.9444 4.66667 18.0889 4.66667 18.2667V19.4C4.66667 19.5778 4.72222 19.7222 4.83333 19.8333C4.94444 19.9444 5.08889 20 5.26667 20H6.46667C6.6 20 6.72222 19.9444 6.83333 19.8333C6.94444 19.7222 7 19.5889 7 19.4333C7 19.2778 6.94444 19.1333 6.83333 19C6.72222 18.8667 6.6 18.8 6.46667 18.8ZM19.4 4.66667H18.2667C18.0889 4.66667 17.9444 4.72222 17.8333 4.83333C17.7222 4.94444 17.6667 5.08889 17.6667 5.26667C17.6667 5.44444 17.7222 5.58889 17.8333 5.7C17.9444 5.81111 18.0889 5.86667 18.2667 5.86667H18.8V6.46667C18.8 6.6 18.8667 6.72222 19 6.83333C19.1333 6.94444 19.2778 7 19.4333 7C19.5889 7 19.7222 6.94444 19.8333 6.83333C19.9444 6.72222 20 6.6 20 6.46667V5.26667C20 5.08889 19.9444 4.94444 19.8333 4.83333C19.7222 4.72222 19.5778 4.66667 19.4 4.66667ZM19.4 17.6667C19.2667 17.6667 19.1333 17.7222 19 17.8333C18.8667 17.9444 18.8 18.0889 18.8 18.2667V18.8H18.2667C18.0889 18.8 17.9444 18.8667 17.8333 19C17.7222 19.1333 17.6667 19.2778 17.6667 19.4333C17.6667 19.5889 17.7222 19.7222 17.8333 19.8333C17.9444 19.9444 18.0889 20 18.2667 20H19.4C19.5778 20 19.7222 19.9444 19.8333 19.8333C19.9444 19.7222 20 19.5778 20 19.4V18.2667C20 18.0889 19.9444 17.9444 19.8333 17.8333C19.7222 17.7222 19.5778 17.6667 19.4 17.6667ZM15.8667 4.66667H15.2667V0.599998C15.2667 0.422222 15.2 0.277777 15.0667 0.166666C14.9333 0.0555553 14.8 -1.90735e-06 14.6667 -1.90735e-06H0.6C0.422222 -1.90735e-06 0.277778 0.0555553 0.166667 0.166666C0.0555556 0.277777 0 0.422222 0 0.599998V14.6667C0 14.8 0.0555556 14.9333 0.166667 15.0667C0.277778 15.2 0.422222 15.2667 0.6 15.2667H4.66667V15.8C4.66667 15.9778 4.72222 16.1222 4.83333 16.2333C4.94444 16.3444 5.08889 16.4 5.26667 16.4C5.44444 16.4 5.58889 16.3444 5.7 16.2333C5.81111 16.1222 5.86667 15.9778 5.86667 15.8V5.86667H15.8667C16.0444 5.86667 16.1889 5.81111 16.3 5.7C16.4111 5.58889 16.4667 5.44444 16.4667 5.26667C16.4667 5.08889 16.4111 4.94444 16.3 4.83333C16.1889 4.72222 16.0444 4.66667 15.8667 4.66667ZM14.0667 4.66667H5.26667C5.08889 4.66667 4.94444 4.72222 4.83333 4.83333C4.72222 4.94444 4.66667 5.08889 4.66667 5.26667V14.0667H1.2V1.2H14.0667V4.66667Z" fill="#1C1C1A" />
                    </svg>

                    {item.surface} m²
                </p>
            </div>

            <button className="mt-4 w-full rounded-full border border-primary px-4 py-2 text-sm text-primary transition hover:bg-primary hover:text-white">
                Je réserve maintenant
            </button>
        </div>
    );
}
